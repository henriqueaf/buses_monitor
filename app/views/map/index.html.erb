<% content_for :head do %>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""/>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin="">
  </script>
<% end %>

<%= turbo_stream_from 'map_controller_index_page' %>

<div data-controller="map" data-action="bus-list:busesUpdated->map#handleBusesUpdated">
  <div id="map"></div>

  <%= render 'input_buses_list', buses: @buses %>
</div>

<div id="map-instructions-panel" class="card shadow-sm">
  <div class="card-body">
    <p class="mb-0 card-text">
      <i class="bi bi-info-circle"></i>
      <%= t('map.update_interval', interval: ENV['REQUEST_BRT_BUSES_INTERVAL_SECONDS']) %>
    </p>
  </div>
</div>
